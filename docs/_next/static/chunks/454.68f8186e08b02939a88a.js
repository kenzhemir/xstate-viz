(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{6961:function(e,t,n){var r,o=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function o(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var a={compressToBase64:function(e){if(null==e)return"";var n=a._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:a._decompress(e.length,32,(function(n){return o(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":a._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:a._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=a.compress(e),n=new Uint8Array(2*t.length),r=0,o=t.length;r<o;r++){var i=t.charCodeAt(r);n[2*r]=i>>>8,n[2*r+1]=i%256}return n},decompressFromUint8Array:function(t){if(null===t||void 0===t)return a.decompress(t);for(var n=new Array(t.length/2),r=0,o=n.length;r<o;r++)n[r]=256*t[2*r]+t[2*r+1];var i=[];return n.forEach((function(t){i.push(e(t))})),a.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),a._decompress(e.length,32,(function(t){return o(n,e.charAt(t))})))},compress:function(t){return a._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var r,o,a,i={},s={},c="",u="",p="",l=2,f=3,d=2,h=[],m=0,g=0;for(a=0;a<e.length;a+=1)if(c=e.charAt(a),Object.prototype.hasOwnProperty.call(i,c)||(i[c]=f++,s[c]=!0),u=p+c,Object.prototype.hasOwnProperty.call(i,u))p=u;else{if(Object.prototype.hasOwnProperty.call(s,p)){if(p.charCodeAt(0)<256){for(r=0;r<d;r++)m<<=1,g==t-1?(g=0,h.push(n(m)),m=0):g++;for(o=p.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&o,g==t-1?(g=0,h.push(n(m)),m=0):g++,o>>=1}else{for(o=1,r=0;r<d;r++)m=m<<1|o,g==t-1?(g=0,h.push(n(m)),m=0):g++,o=0;for(o=p.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&o,g==t-1?(g=0,h.push(n(m)),m=0):g++,o>>=1}0==--l&&(l=Math.pow(2,d),d++),delete s[p]}else for(o=i[p],r=0;r<d;r++)m=m<<1|1&o,g==t-1?(g=0,h.push(n(m)),m=0):g++,o>>=1;0==--l&&(l=Math.pow(2,d),d++),i[u]=f++,p=String(c)}if(""!==p){if(Object.prototype.hasOwnProperty.call(s,p)){if(p.charCodeAt(0)<256){for(r=0;r<d;r++)m<<=1,g==t-1?(g=0,h.push(n(m)),m=0):g++;for(o=p.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&o,g==t-1?(g=0,h.push(n(m)),m=0):g++,o>>=1}else{for(o=1,r=0;r<d;r++)m=m<<1|o,g==t-1?(g=0,h.push(n(m)),m=0):g++,o=0;for(o=p.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&o,g==t-1?(g=0,h.push(n(m)),m=0):g++,o>>=1}0==--l&&(l=Math.pow(2,d),d++),delete s[p]}else for(o=i[p],r=0;r<d;r++)m=m<<1|1&o,g==t-1?(g=0,h.push(n(m)),m=0):g++,o>>=1;0==--l&&(l=Math.pow(2,d),d++)}for(o=2,r=0;r<d;r++)m=m<<1|1&o,g==t-1?(g=0,h.push(n(m)),m=0):g++,o>>=1;for(;;){if(m<<=1,g==t-1){h.push(n(m));break}g++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:a._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,r){var o,a,i,s,c,u,p,l=[],f=4,d=4,h=3,m="",g=[],v={val:r(0),position:n,index:1};for(o=0;o<3;o+=1)l[o]=o;for(i=0,c=Math.pow(2,2),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(s>0?1:0)*u,u<<=1;switch(i){case 0:for(i=0,c=Math.pow(2,8),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(s>0?1:0)*u,u<<=1;p=e(i);break;case 1:for(i=0,c=Math.pow(2,16),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(s>0?1:0)*u,u<<=1;p=e(i);break;case 2:return""}for(l[3]=p,a=p,g.push(p);;){if(v.index>t)return"";for(i=0,c=Math.pow(2,h),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(s>0?1:0)*u,u<<=1;switch(p=i){case 0:for(i=0,c=Math.pow(2,8),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(s>0?1:0)*u,u<<=1;l[d++]=e(i),p=d-1,f--;break;case 1:for(i=0,c=Math.pow(2,16),u=1;u!=c;)s=v.val&v.position,v.position>>=1,0==v.position&&(v.position=n,v.val=r(v.index++)),i|=(s>0?1:0)*u,u<<=1;l[d++]=e(i),p=d-1,f--;break;case 2:return g.join("")}if(0==f&&(f=Math.pow(2,h),h++),l[p])m=l[p];else{if(p!==d)return null;m=a+a.charAt(0)}g.push(m),l[d++]=a+m.charAt(0),a=m,0==--f&&(f=Math.pow(2,h),h++)}}};return a}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)},2454:function(e,t,n){"use strict";n.r(t),n.d(t,{EditorWithXStateImports:function(){return I},default:function(){return N}});var r=n(809),o=n.n(r),a=n(2809),i=n(266),s=n(5893),c=n(3606),u=n(7294),p=n(3091),l=n(9412),f=n(8415),d=function(e){return new Promise((function(t,n){var r=document.createElement("script");r.src=e;var o=setTimeout((function(){n("Timeout")}),15e3);r.onload=function(){t(),clearTimeout(o)},document.body.appendChild(r)}))},h=function(){var e=!1,t=function(){var t=(0,i.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:return n=window.define,window.define=function(){},t.next=6,Promise.all([d("https://unpkg.com/prettier@2.3.2/standalone.js"),d("https://unpkg.com/prettier@2.3.2/parser-typescript.js")]);case 6:window.define=n,e=!0;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{format:function(){var e=(0,i.Z)(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:return e.abrupt("return",prettier.format(n,{parser:"typescript",plugins:prettierPlugins}));case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}}(),m=n(750),g=n(430),v=n(3934),b=n(6961),x=n.n(b),y=n(9697),w=(0,y.VS)()?window.localStorage:(0,y.o6)(),k="undefined"!==typeof globalThis?globalThis:window||{};k.typeDefinitions={};var O=k.typeDefinitions,C=function(e,t){if(!e){var n=t.substring(0,t.indexOf("/")),r=t.substring(t.indexOf("/")+1);return"https://www.unpkg.com/".concat(encodeURIComponent(n),"/").concat(encodeURIComponent(r))}return"https://www.unpkg.com/".concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t))},j=function(e,t,n){n.logger.error("".concat(e," - will not try again in this session"),t.status,t.statusText,t)},T=function(e){return["assert","async_hooks","buffer","child_process","cluster","console","constants","crypto","dgram","dns","domain","events","fs","fs/promises","http","http2","https","inspector","module","net","os","path","perf_hooks","process","punycode","querystring","readline","repl","stream","string_decoder","sys","timers","tls","trace_events","tty","url","util","v8","vm","wasi","worker_threads","zlib"].includes(e)?"node":e},A=function(e,t){return function(e,t){if(!e)return t;var n=e.split("/"),r=t.split("/");n.pop();for(var o=0;o<r.length;o++)"."!=r[o]&&(".."==r[o]?n.pop():n.push(r[o]));return n.join("/")}(t,e)},S=function(e,t,n){var r=0===t.indexOf("@")&&2===t.split("/").length;return-1===t.indexOf("@")&&1===t.split("/").length||r?t:"".concat(e,"-").concat(A(t,n))},M=function(){var e=(0,i.Z)(o().mark((function e(t,n,r){var a,i,s,c,u,p,l,f,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n&&0===n.indexOf("https://"),i=t,s=n,t||(i=n.substring(0,n.indexOf("/")),s=n.substring(n.indexOf("/")+1)),c=a?n:C(i,s),e.next=7,_(r,c);case 7:if(u=e.sent){e.next=18;break}return p=s&&0===s.indexOf("https://"),l="".concat(s.replace(".d.ts",""),"/index.d.ts"),f=p?s:C(i,l),e.next=14,_(r,f);case 14:if(u=e.sent){e.next=17;break}return e.abrupt("return",j("Could not get root d.ts file for the module '".concat(i,"' at ").concat(s),{},r));case 17:p||(s=l);case 18:return e.next=20,R(u,i,s,r);case 20:a?(d='declare module "'.concat(s,'" { ').concat(u," }"),r.addLibraryToRuntime(d,s)):r.addLibraryToRuntime(u,"file:///node_modules/".concat(i,"/").concat(s));case 21:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),P=function(){var e=(0,i.Z)(o().mark((function e(t,n){var r,a,i,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={types:{ts:"included"},objectID:t},O[t]=r,"included"!==r.types.ts){e.next=21;break}return a=C(t,"package.json"),e.next=6,n.fetcher(a);case 6:if((i=e.sent).ok){e.next=9;break}return e.abrupt("return",j("Could not get Package JSON for the module '".concat(t,"'"),i,n));case 9:return e.next=11,i.json();case 11:if(s=e.sent){e.next=14;break}return e.abrupt("return",j("Could not get Package JSON for the module '".concat(t,"'"),i,n));case 14:return n.addLibraryToRuntime(JSON.stringify(s,null,"  "),"file:///node_modules/".concat(t,"/package.json")),!(c=s.typing||s.typings||s.types)&&"string"===typeof s.main&&s.main.indexOf(".js")>0&&(c=s.main.replace(/js$/,"d.ts")),c||(c="index.d.ts"),e.abrupt("return",{mod:t,path:c,packageJSON:s});case 21:if("definitely-typed"!==r.types.ts){e.next=25;break}return e.abrupt("return",{mod:r.types.definitelyTyped,path:"index.d.ts",packageJSON:r});case 25:throw"This shouldn't happen";case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=(0,i.Z)(o().mark((function e(t,n){var r,a,i,s,c,u,p,l,f,d,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=w.getItem(n))){e.next=11;break}if(a=r.split("-=-^-=-"),i=(0,v.Z)(a,2),s=i[0],c=i[1],u=new Date(s),p=new Date,6048e5,!(p.getTime()-u.getTime()<6048e5)){e.next=10;break}return e.abrupt("return",x().decompressFromUTF16(c));case 10:t.logger.log("Skipping cache for ",n);case 11:return e.next=13,t.fetcher(n);case 13:if((l=e.sent).ok){e.next=16;break}return e.abrupt("return",j("Could not get DTS response for the module at ".concat(n),l,t));case 16:return e.next=18,l.text();case 18:if(f=e.sent){e.next=21;break}return e.abrupt("return",j("Could not get text for DTS response at ".concat(n),l,t));case 21:return d=new Date,h="".concat(d.toISOString(),"-=-^-=-").concat(x().compressToUTF16(f)),w.setItem(n,h),e.abrupt("return",f);case 25:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=(0,i.Z)(o().mark((function e(t,n,r,a){var i,s,c,u,p,l,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.indexOf("reference path")>0)){e.next=19;break}s=/<reference path="(.*)" \/>/gm;case 2:if(null===(i=s.exec(t))){e.next=19;break}if(!(c=i[1])){e.next=17;break}if(!(u=A(c,r))){e.next=17;break}return p=C(n,u),e.next=10,_(a,p);case 10:if(l=e.sent){e.next=13;break}return e.abrupt("return",j("Could not get root d.ts file for the module '".concat(n,"' at ").concat(r),{},a));case 13:return e.next=15,R(l,n,u,a);case 15:f="file:///node_modules/".concat(n,"/").concat(u),a.addLibraryToRuntime(l,f);case 17:e.next=2;break;case 19:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)(o().mark((function e(t,n){var r,a,i,s,c=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:fetch,a=c.length>3?c[3]:void 0,i={sourceCode:t,addLibraryToRuntime:function(e,t){k.typeDefinitions[t]=e,n(e,t)},fetcher:r,logger:a.logger},s=R(t,void 0,"playground.ts",i),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(e,t,n,r){(function(e){for(var t,n=/(const|let|var)(.|\n)*? require\(('|")(.*)('|")\);?$/gm,r=/(import|export)((?!from)(?!require)(.|\n))*?(from|require\()\s?('|")(.*)('|")\)?;?$/gm,o=/import\s+?\(?('|")(.*)('|")\)?;?/gm,a=new Set;null!==(t=r.exec(e));)t[6]&&a.add(t[6]);for(;null!==(t=n.exec(e));)t[5]&&a.add(t[5]);for(;null!==(t=o.exec(e));)t[2]&&a.add(t[2]);return Array.from(a)})(e).filter((function(e){return t||/^xstate($|\/)/.test(e)})).forEach(function(){var e=(0,i.Z)(o().mark((function e(a){var i,s,c,u,p,l,f,d,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=T(a),t||!i.startsWith(".")){e.next=3;break}return e.abrupt("return",r.logger.log("[ATA] Can't resolve relative dependencies from the playground root"));case 3:if(s=S(t,i,t),!O[s]&&null!==O[s]){e.next=6;break}return e.abrupt("return");case 6:if(c=0===i.indexOf("@")&&2===i.split("/").length,u=-1===i.indexOf("@")&&1===i.split("/").length&&"."!==i&&".."!==i,p=u||c,l=0===i.indexOf("https://"),!p){e.next=22;break}return O[s]=null,e.next=15,P(i,r);case 15:if(!(f=e.sent)){e.next=20;break}return O[s]=f.packageJSON,e.next=20,M(f.mod,f.path,r);case 20:e.next=35;break;case 22:if(!l){e.next=27;break}return e.next=25,M(i,i,r);case 25:e.next=35;break;case 27:if(i&&n){e.next=29;break}throw"No outer module or path for a relative import: ".concat(i);case 29:return d=A(i,n),"."===i&&(d+="/index"),O[s]=null,h=d.endsWith(".ts")?d:d+".d.ts",e.next=35,M(t,h,r);case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),D(e,t,n,r)};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(e,t){var n=function(e,n){t.languages.typescript.typescriptDefaults.addExtraLib(e,n);var r=t.Uri.file(n);null===t.editor.getModel(r)&&t.editor.createModel(e,"javascript",r)};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.getModel().getValue();E(t,n,window.fetch.bind(window),{logger:{log:function(){},error:console.error,warn:console.warn}})}(["xstate","xstate/lib/model","xstate/lib/actions"].map((function(e){return"import '".concat(e,"'")})).join("\n")),e},I=function(e){var t=(0,l.b)(),n=(0,g.g)(),r=(0,u.useRef)(null),a=(0,u.useRef)(new Set);return(0,u.useEffect)((function(){var e=r.current,t=a.current,o=n.theme;e&&t&&(t.has(o)||e.defineTheme(o,p.n[o]),e.setTheme(o),f.q.saveEditorTheme(n.theme))}),[n.theme]),(0,s.jsx)(c.ZP,{defaultPath:"main.ts",defaultLanguage:"typescript",value:e.value,options:{minimap:{enabled:!1},tabSize:2,glyphMargin:!0,readOnly:(null===t||void 0===t?void 0:t.isEmbedded)&&t.readOnly},loading:(0,s.jsx)(m.f,{text:"Preparing the editor"}),onChange:function(t){var n;"string"===typeof t&&(null===(n=e.onChange)||void 0===n||n.call(e,t))},theme:"vs-dark",onMount:function(){var t=(0,i.Z)(o().mark((function t(a,s){var c,u,l;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.current=s.editor,u=n.theme,s.editor.defineTheme(u,p.n[u]),s.editor.setTheme(u),s.languages.typescript.typescriptDefaults.setWorkerOptions({customWorkerPath:"".concat(new URL(window.location.origin),"ts-worker.js")}),s.languages.typescript.typescriptDefaults.setCompilerOptions(F(F({},s.languages.typescript.typescriptDefaults.getCompilerOptions()),{},{module:s.languages.typescript.ModuleKind.CommonJS,moduleResolution:s.languages.typescript.ModuleResolutionKind.NodeJs,strict:!0})),a.addAction({id:"format",label:"Format",keybindings:[s.KeyMod.CtrlCmd|s.KeyCode.Enter],run:function(e){e.getAction("editor.action.formatDocument").run()}}),s.languages.registerDocumentFormattingEditProvider("typescript",{provideDocumentFormattingEdits:function(){var t=(0,i.Z)(o().mark((function t(n){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.format(a.getValue());case 3:return t.t0=t.sent,t.t1=n.getFullModelRange(),t.t2={text:t.t0,range:t.t1},t.abrupt("return",[t.t2]);case 9:t.prev=9,t.t3=t.catch(0),console.error(t.t3);case 12:return t.prev=12,null===(r=e.onFormat)||void 0===r||r.call(e),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})));return function(e){return t.apply(this,arguments)}}()}),a.addAction({id:"save",label:"Save",keybindings:[s.KeyMod.CtrlCmd|s.KeyCode.KEY_S],run:function(){var t;null===(t=e.onSave)||void 0===t||t.call(e),a.getAction("editor.action.formatDocument").run()}}),l=Z(a,s),null===(c=e.onMount)||void 0===c||c.call(e,l,s);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})},N=I}}]);